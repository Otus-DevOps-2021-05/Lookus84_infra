#Выполнено ДЗ №8


Установлен pip

Установлен ansible

Подняты образы app и db

Создан ansible.cfg, отредактирован inventory

Создан inventory.yml:

ansible$ ansible all -m ping -i inventory.yml

appserver | SUCCESS => {
"ansible_facts": {
"discovered_interpreter_python": "/usr/bin/python3"
},
"changed": false,
"ping": "pong"
}
dbserver | SUCCESS => {
"ansible_facts": {
"discovered_interpreter_python": "/usr/bin/python3"
},
"changed": false,
"ping": "pong"
}

ansible app -m shell -a 'ruby -v; bundler -v'

appserver | CHANGED | rc=0 >>
ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]
Bundler version 1.11.2

Создан clone.yml

Выполним ansible-playbook clone.yml

PLAY [Clone] *************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************************************************
ok: [appserver]

TASK [Clone repo] ********************************************************************************************************************************************************************************
ok: [appserver]

PLAY RECAP ***************************************************************************************************************************************************************************************
appserver : ok=2 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0

выполним ansible app -m command -a 'rm -rf ~/reddit'

Повторим предыдущую команду:

PLAY [Clone] *************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************************************************
ok: [appserver]

TASK [Clone repo] ********************************************************************************************************************************************************************************
changed: [appserver]

PLAY RECAP ***************************************************************************************************************************************************************************************
appserver : ok=2 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0

----- на этот раз changed=1 - потому, что мы удалили  каталог reddit в домашней директории.  до удаления ansible ничего не нужно было делать, тк  репозиторий был уже установлен.
